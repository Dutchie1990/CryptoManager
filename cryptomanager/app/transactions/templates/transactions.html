{% extends 'base.html' %}
{% block heading %}{{ ('Transactions') }}{% endblock %}
{% set active_page = 'transactions' %}

{% block styles %}
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.min.css"> 
    <link rel="stylesheet" href="{{ url_for('static', filename='css/assets-transactions.css')}}" type="text/css">
{% endblock %}

{% block content %}

<div class="jumbotron text-center">
    <h5>Manage your transactions</h5>
    <button class="btn btn-lg btn-success mt-5" data-toggle="modal" data-target="#transactionModal">Add transaction</button>
</div>

<div class="justify-content-center">
<div class="table-responsive col-md-12">
    <table id="table" class="table table-striped">
        <thead>
            <tr>
                <th data-field="Date" data-sortable="true" scope="col">Date</th>
                <th data-field="Ordertype" data-sortable="true" scope="col">Ordertype</th>
                <th data-field="Pair" scope="col">Pair</th>
                <th class="d-none d-sm-block" data-field="Price" scope="col">Price</th>
                <th data-field="Volume" scope="col">Volume</th>
                <th data-field="Cost" scope="col">Costs</th>
            </tr>
        </thead>
        <tbody>
            {% if transactions %}
                {% for transaction in transactions %}
                    {% if transaction.ordertype == 'deposit' or transaction.ordertype == 'withdrawal'%}
                        <tr>
                            <td scope="row">{{ transaction.date }}</td>
                            <td class="{{ transaction.ordertype }}">{{ transaction.ordertype | capitalize}}</td>
                            <td>-</td>
                            <td class="d-none d-sm-block">-</td>
                            <td>{{transaction.volume}}</td>
                            <td>-</td>
                        </tr>
                    {% else %}
                        <tr>
                            <td scope="row">{{ transaction.date }}</td>
                            <td>{{ transaction.ordertype | capitalize}}</td>
                            <td>{{ transaction.symbolIn }}/{{ transaction.symbolOut }}</td>
                            <td class="d-none d-sm-block">{{ transaction.prize }} {{ transaction.symbolOut }}</td>
                            <td>{{transaction.volume}}</td>
                            <td>{{ transaction.costs }} {{ transaction.symbolOut }} </td>
                        </tr>
                    {% endif %}
                {% endfor %}
            {% endif %}
        </tbody>
    </table>
    </div>
</div>

<div class="modal fade" id="transactionModal" tabindex="-1" role="dialog" aria-labelledby="transactionModal"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="transactionModal">Add Transaction</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form class="form col-12 col-md-8" action="" method="POST">
                        <div class="row justify-content-end">
                            <div class="input-group has-validation mb-3">
                                {{ form.csrf_token }}
                                <div class="form-group">
                                    {{ form.volume.label }}
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">$</span>
                                        {{ form.volume }}
                                    </div>
                                </div>
                                <div class="form-group">
                                    {{ form.symbolIn.label }}
                                    {{ form.symbolIn }}
                                </div>
                                <div class="form-group">
                                    {{ form.symbolOut.label }}
                                    {{ form.symbolOut }}
                                </div>
                                <div class="form-group">
                                    <div> {{ form.prize.label }}</div>
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">$</span>
                                        {{ form.prize }}
                                    </div>  
                                </div>
                            </div>
                           <button id="clear-button" class="btn btn-outline-dark m-2" disabled>Clear</button>
                            <button id="submit-button" type="submit" class="btn btn-dark m-2" disabled>Confirm</button>   
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>


{% endblock %}

{% block scripts %}
<script type="text/javascript" src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/transactions.js')}}"></script>
{% endblock %}